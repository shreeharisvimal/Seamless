{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}SEAMLESS{% endblock title%}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" integrity="sha512-W/zrbCncQnky/EzL+/AYwTtosvrM+YG/V6piQLSe2HuKS6cmbw89kjYkp3tWFn1dkWV7L1ruvJyKbLz73Vlgfg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" integrity="sha512-siarrzI1u3pCqFG2LEzi87McrBmq6Tp7juVsdmGY1Dr8Saw+ZBAzDzrGwX3vgxX1NkioYNCFOVC0GpDPss10zQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="">
    <meta property="og:type" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">
    <!-- Favicon -->
    <link rel="shortcut icon" href="{% static 'imgs/favicon.png' %}" type="image/x-icon">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropper/4.1.0/cropper.min.css">

</head>
<body>

    <header class="header-area header-style-1 header-height-2">
        <div class="header-top header-top-ptb-1 d-none d-lg-block">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-3 col-4 d-flex align-items-center">
                        <a href="{% url "user_side:landing" %}">
                            <img style="width:50px" src="{% static 'imgs/theme/logo.png'%}" alt="logo">
                        </a>
                        <p class="ml-2 mb-0">Seamless.com</p>
                    </div>
                    <div class="main-menu main-menu-padding-1 main-menu-lh-2 d-none d-lg-block col-lg-7">
                        <nav>
                            <ul class="nav">
                                <li class="nav-item">
                                    <a class="nav-link active" href="{% url "user_side:landing" %}">HOME<i class="fi-rs-angle-down "></i></a>
                                    <ul class="sub-menu">
                                        <li class="nav-item"><a class="nav-link" href="{% url "user_side:product_list"%}">PRODUCTS</a></li>
                                        <li class="nav-item"><a class="nav-link" href="index-2.html">MY ORDERS</a></li>
                                        <li class="nav-item"><a class="nav-link" href="index-3.html">DASHBOARD</a></li>
                                        <li class="nav-item"><a class="nav-link" href="index-4.html">NEW ARRIVAL</a></li>
                                    </ul>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{% url "user_side:category_page"%}">CATEGORY</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#">CONTACT</a>
                                </li>
                                <li>
                                    <a class="nav-link" href="#">ABOUT</a>
                                </li>
                                <!-- Add more navigation items here -->
                            </ul>
                            
                        </nav>
                        
                    </div>


                    {% if user.is_authenticated %}
                    <div class="col-lg-2 d-flex justify-content-end">
                        <div class="header-action-2">
                            <h5>Hello, {{request.user}}</h5>
                            <div class="header-action-icon-2" style="margin-left:10px">
                                <a href="{% url "user_side:view_wishlist" %}" class="right_nav">
                                    <img class="svgInject" alt="Evara" src="{% static 'imgs/theme/icons/icon-heart.svg' %}">
                                    
                                    <span class="pro-count blue">{{wish_count}}</span>
                                    
                                </a>
                            </div>
                            <div class="header-action-icon-2" style="margin-left:10px">
                                <a href="{% url "cart:view_cart" %}" class="right_nav">
                                    <img alt="Evara" src="{% static 'imgs/theme/icons/icon-cart.svg' %}">
                                    <span class="pro-count blue">{{cart_count}}</span>
                                </a>
                            </div>
                        </div>
                            <div class="dropdown nav-item" style="width:90px">
                                {% if my_pic %}
                                <a style="margin-left:30px; width:90px" class="dropdown-toggle" data-bs-toggle="dropdown" href="#" id="dropdownAccount" aria-expanded="false">
                                    <img width="40px" height="40px" class=" rounded-circle" src="{{my_pic.url}}" alt="User">
                                </a>
                                {% else %}
                                <a style="margin-left:30px; width:90px" class="dropdown-toggle" data-bs-toggle="dropdown" href="#" id="dropdownAccount" aria-expanded="false">
                                    <img style="width:90px" class=" rounded-circle" src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3.webp" alt="User">
                                </a>
                                {% endif %}
                                <div class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownAccount">
                                    <a class="dropdown-item" href="{% url "account:my_dashboard" %}"> MY ACCOUNT</a>
                                    <a class="dropdown-item" href="{% url "order:order_user_view" %}"> MY ORDERS</a>
                                    <a class="dropdown-item" href="#"> COUPONS</a>
                                    <a class="dropdown-item text-danger" href="#"> HELPLINE</a>
 
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item text-danger" href="{% url 'authentication:logout' %}">LOGOUT</a>

                                </div>
                            </div>
                    </div>
                    {% else %}  
                    <div class="col-lg-2 d-flex justify-content-end">
                        
                        <h5 style="margin-right:20px;">Hello, <br>Guest</h5>
                        <div class="header-action-2">
                            <div class="header-action-icon-2">
                                <a href="{% url "authentication:login_handler" %}" style="margin-right:25px" class="right_nav">
                                 <h5>LOGIN</h5> 
                                </a>
                                <a href="{% url "authentication:sign_handler" %}"  style="margin-left:25px" class="right_nav">
                                    <h5>SIGNUP</h5> 
                                </a>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="header-middle header-middle-ptb-1 d-none d-lg-block">
            <div class="container">
                <div class="header-wrap">
                    <div class="header-right">
                        <div class="search-style-2">
                            <form id="searchForm" action="{% url "user_side:all_search" %}" method="POST">
                                {% csrf_token %}
                                <select class="select-active">
                                    <option></option>
                                </select>
                                <input type="text" id="search_id" name="search_id" placeholder="Search for items...">
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    

  


   {% block main %}

   

   {% endblock main%}
   <section class="deals section-padding">
    <div class="container"> 
        <div class="row">
            <div class="col-lg-6 deal-co">
                <div class="deal wow fadeIn animated mb-md-4 mb-sm-4 mb-lg-0" style="background-image: url({% static 'imgs/banner/menu-banner-7.jpg' %});">
                    <div class="deal-top">
                        <h2 class="text-brand ">Deal of the Day.</h2>
                        <h5 class='text-warning'>Limited quantities.</h5>
                    </div>
                    <div class="deal-content">
                        {% comment %} <h6 class="product-title "><a href="{% url "user_side:product" %}" class='text-danger'> New <strong>AZUS GAMING</strong></a></h6> {% endcomment %}
                        <div class="product-price"><span class="new-price">$139.00</span><span class="old-price">$160.99</span></div>
                    </div>
                    <div class="deal-bottom">
                        <p class='text-warning'>Hurry Up! Offer End In:</p>
                        <div class="deals-countdown" data-countdown="2025/03/25 00:00:00"></div>
                        <a href="shop-grid-right.html" class="btn hover-up">Shop Now <i class="fi-rs-arrow-right"></i></a>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 deal-co">
                <div class="deal wow fadeIn animated mb-md-4 mb-sm-4 mb-lg-0" style="background-image: url({% static 'imgs/banner/menu-banner-8.jpg'%}); height:100px;">
                    <div class="deal-top">
                        <h2 class="text-success">GAMING</h2>
                        <h5 class='text-light'>hardcore</h5>
                    </div>
                    <div class="deal-content">
                        {% comment %} <h6 class="product-title"><a href="{% url "user_side:product" %}" class='text-danger'>Try something new for <strong>GAMING</strong></a></h6> {% endcomment %}
                        <div class="product-price"><span class="new-price">$178.00</span><span class="old-price">$256.99</span></div>
                    </div>
                    <div class="deal-bottom">
                        <p class='text-warning'>Hurry Up! Offer End In:</p>
                        <div class="deals-countdown" data-countdown="2026/03/25 00:00:00"></div>
                        <a href="shop-grid-right.html" class="btn hover-up">Shop Now <i class="fi-rs-arrow-right"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>



   <footer class="main">
    <section class="newsletter p-30 text-white wow fadeIn animated">
        <div class="container">
            <div class="row align-items-center">
              
                    <div class="row align-items-center">
                        <div class="col flex-horizontal-center">
                            <img class="icon-email" src="{% static 'imgs/theme/icons/icon-email.svg' %}" alt="">
                            <h4 class="font-size-20 mb-0 ml-3">Sign up to seamless</h4>
                        </div>
                        <div class="col my-4 my-md-0 des">
                            <h5 class="font-size-15 ml-4 mb-0 " style="text:white;zindex-3">.................and receive <strong>250 rs coupon for first shopping. And other cashbacks</strong></h5>
                        </div>
                    </div>

            </div>
        </div>
    </section>
    <section class="section-padding footer-mid">
        <div class="container pt-15 pb-20">
            <div class="row">
                <div class="col-lg-4 col-md-6">
                    <div class="widget-about font-md mb-md-5 mb-lg-0">
                        <div class="logo logo-width-1 wow fadeIn animated">
                            <a href="index.html"><img src="{% static 'imgs/theme/logo.png'%}" alt="logo" ></a>
                        </div>
                        <h5 class="mt-20 mb-10 fw-600 text-grey-4 wow fadeIn animated">Contact</h5>
                        <p class="wow fadeIn animated">
                            <strong>Address: </strong>562 Wellington Road, Street 32, San Francisco
                        </p>
                        <p class="wow fadeIn animated">
                            <strong>Phone: </strong>+01 2222 365 /(+91) 01 2345 6789
                        </p>
                        <p class="wow fadeIn animated">
                            <strong>Hours: </strong>10:00 - 18:00, Mon - Sat
                        </p>
                        <h5 class="mb-10 mt-30 fw-600 text-grey-4 wow fadeIn animated">Follow Us</h5>
                        <div class="mobile-social-icon wow fadeIn animated mb-sm-5 mb-md-0">
                            <a href="#"><img src="{% static "imgs/theme/icons/icon-facebook.svg" %}" alt=""></a>
                            <a href="#"><img src="{% static "imgs/theme/icons/icon-twitter.svg" %}" alt=""></a>
                            <a href="#"><img src="{% static "imgs/theme/icons/icon-instagram.svg" %}" alt=""></a>
                            <a href="#"><img src="{% static "imgs/theme/icons/icon-pinterest.svg" %}" alt=""></a>
                            <a href="#"><img src="{% static "imgs/theme/icons/icon-youtube.svg" %}" alt=""></a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3">
                    <h5 class="widget-title wow fadeIn animated">About</h5>
                    <ul class="footer-list wow fadeIn animated mb-sm-5 mb-md-0">
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Delivery Information</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms &amp; Conditions</a></li>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">Support Center</a></li>
                    </ul>
                </div>
                <div class="col-lg-2  col-md-3">
                    <h5 class="widget-title wow fadeIn animated">My Account</h5>
                    <ul class="footer-list wow fadeIn animated">
                        <li><a href="#">Sign In</a></li>
                        <li><a href="#">View Cart</a></li>
                        <li><a href="#">My Wishlist</a></li>
                        <li><a href="#">Track My Order</a></li>
                        <li><a href="#">Help</a></li>
                        <li><a href="#">Order</a></li>
                    </ul>
                </div>
                <div class="col-lg-4">
                    <h5 class="widget-title wow fadeIn animated">Install App</h5>
                    <div class="row">
                        <div class="col-md-8 col-lg-12">
                            <p class="wow fadeIn animated">From App Store or Google Play</p>
                            <div class="download-app wow fadeIn animated">
                                <a href="#" class="hover-up mb-sm-4 mb-lg-0"><img class="active" src="{% static "imgs/theme/app-store.jpg"%}" alt=""></a>
                                <a href="#" class="hover-up"><img src="{% static "imgs/theme/google-play.jpg "%}" alt=""></a>
                            </div>
                        </div>
                        <div class="col-md-4 col-lg-12 mt-md-3 mt-lg-0">
                            <p class="mb-20 wow fadeIn animated">Secured Payment Gateways</p>
                            <img class="wow fadeIn animated" src="{% static "imgs/theme/payment-method.png" %}" alt="">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div class="container pb-20 wow fadeIn animated">
        <div class="row">
            <div class="col-12 mb-20">
                <div class="footer-bottom"></div>
            </div>
            <div class="col-lg-6">
                <p class="float-md-left font-sm text-muted mb-0">&copy; 2021, <strong class="text-brand">SEAMLESS</strong> - THE NEW ERA  </p>
            </div>
            <div class="col-lg-6">
                <p class="text-lg-end text-start font-sm text-muted mb-0">
                    Designed by <a href="http://alithemes.com/" target="_blank">seamless.com</a>. All rights reserved
                </p>
            </div>
        </div>
    </div>
</footer>
<!-- Preloader Start -->
 <div id="preloader-active">
    <div class="preloader d-flex align-items-center justify-content-center">
        <div class="preloader-inner position-relative">
            <div class="text-center">
                <h5 class="mb-10">Now Loading</h5>
                <div class="loader">
                    <div class="bar bar1"></div>
                    <div class="bar bar2"></div>
                    <div class="bar bar3"></div>
                    <div class="bar bar4"></div>
                    <div class="bar bar5"></div>
                </div>
            </div>
        </div>
    </div>
</div> 


<script src="{% static 'js/vendor/modernizr-3.6.0.min.js' %}"></script>
<script src="{% static 'js/vendor/jquery-3.6.0.min.js' %}"></script>
<script src="{% static 'js/vendor/jquery-migrate-3.3.0.min.js' %}"></script>
<script src="{% static 'js/vendor/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'js/plugins/slick.js' %}"></script>
<script src="{% static 'js/plugins/jquery.syotimer.min.js' %}"></script>
<script src="{% static 'js/plugins/wow.js' %}"></script>
<script src="{% static 'js/plugins/jquery-ui.js' %}"></script>
<script src="{% static 'js/plugins/perfect-scrollbar.js' %}"></script>
<script src="{% static 'js/plugins/magnific-popup.js' %}"></script>
<script src="{% static 'js/plugins/select2.min.js' %}"></script>
<script src="{% static 'js/plugins/waypoints.js' %}"></script>
<script src="{% static 'js/plugins/counterup.js' %}"></script>
<script src="{% static 'js/plugins/jquery.countdown.min.js' %}"></script>
<script src="{% static 'js/plugins/images-loaded.js' %}"></script>
<script src="{% static 'js/plugins/isotope.js' %}"></script>
<script src="{% static 'js/plugins/scrollup.js' %}"></script>
<script src="{% static 'js/plugins/jquery.vticker-min.js' %}"></script>
<script src="{% static 'js/plugins/jquery.theia.sticky.js' %}"></script>
<script src="{% static 'js/plugins/jquery.elevatezoom.js' %}"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.css">

<!-- Include SweetAlert JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>


    
   

    {% if messages %}
        {% for message in messages %}
            Swal.fire({
                icon: '{{ message.tags }}',
                title: '{{ message.tags|title }}',
                text: '{{ message }}',
            });
        {% endfor %}
    {% endif %}
  </script>
<!-- Template JS -->
<script src="{% static 'js/main.js' %}"></script>
<script src="{% static 'js/shop.js' %}"></script>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Include Bootstrap JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>


<!-- External Libraries -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/cropper/4.1.0/cropper.min.js"></script>
<script>
    $(document).ready(function () {
        // Attach keyup event to the input field
        $("#search_id").keyup(function () {
            // Get the value from the input field
            var searchTerm = $(this).val();

            // Make an AJAX request
            $.ajax({
                type: "POST",
                url: "{% url 'user_side:search' %}",
                data: {
                    'search_term': searchTerm,
                    'csrfmiddlewaretoken': $('input[name="csrfmiddlewaretoken"]').val()
                },
                success: function (data) {
                    // Check if 'data' is an array
                    if (Array.isArray(data.data)) {
                        // Update the options based on the AJAX response
                        updateOptions(data.data);
                    } else {
                        console.error('Invalid data structure received from the server.');
                    }
                },
                error: function (error) {
                    console.log(error);
                }
            });
        });

        // Function to update options based on the AJAX response
        function updateOptions(data) {
            // Clear existing options
            $(".select-active").empty();
        
            // Log the data to the console for debugging
            console.log(data);
        
            // Add new options based on the AJAX response
            data.forEach(function (item) {
                // Access 'get_variant_name' method to get the desired name
                var productName = item.product_varient_slug;
                $(".select-active").append("a<option>" + productName+ "</option>");
            });
        }
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function () {

        const imageBox = document.getElementById('image-box');
        const imageForm = document.getElementById('image-form');
        const confirmBtn = document.getElementById('confirm-btn');
        const input = document.getElementById('id_file');
        const csrf = document.getElementById('csrfmiddlewaretoken')
    
        input.addEventListener('change', () => {

            const imgData = input.files[0];
            const imgUrl = URL.createObjectURL(imgData);
            imageBox.innerHTML = `<img src="${imgUrl}" id=image>`
            
    
            const $image = $('#image');
            $image.cropper({
                aspectRatio: 1,
                
            });

            const cropper = $image.data('cropper');
          
            confirmBtn.addEventListener('click', () => {

                cropper.getCroppedCanvas().toBlob((blob) => {
                    const formData = new FormData();
                    formData.append('csrfmiddlewaretoken', csrf[0].value);
                    formData.append('profile_image', blob, 'cropped-image.jpg');
                    console.log(' int he fjalsdjfalsjfalsjfaslkdfaslkdfjasl;fjaslodkfajsfl;jasldkfasdfasjfklasldfa;ksjdfasdlfkj')
                    $.ajax({
                        type: 'POST',
                        url: imageForm.action,  // Update the URL pattern
                        data: formData,
                       
                        success: (response) => {
                            console.log(response.status);
                            window.location.href = `Account_details_edit/${parseInt(profile.pk)}/`;
                        },

                        error: (error) => {
                            console.error(error);
                        },
                        contentType: false,
                        processData: false,
                    });
                });
            });
        });
    });
</script>

</body>
</html>